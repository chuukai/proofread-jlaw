# proofread-jlaw
日本の法令を校正するための機械学習モデル



## モデルの作り方
### 環境
Google Colab Pro(有料)
### 法令データをダウンロード
[XML一括ダウンロード](https://elaws.e-gov.go.jp/download/)のページで左側のメニューから「法令分類データ」を選び、50種のデータをそれぞれダウンロードし、伸張します。
### XMLファイルから文章を抜き取り
#### 昭和22年以降に制定された法令
XMLファイル(ファイル名の先頭が322から364,401から431,501から503)からSentenceタグの中身を抜き取ります。私の場合はnkfと、xml-twig-toolsパッケージの中にあるxml_grepを使いました。
コマンドを例示すると
```grepsentence.sh
nkf -w ./37/332AC0000000035_20200401_429AC0000000045/332AC0000000035_20200401_429AC0000000045.xml | xml_grep 'Sentence' --text_only /dev/stdin > ./37/332AC0000000035_20200401_429AC0000000045.sentence
```
となります。
#### 昭和21年以前の法令
文語文になっているため、機械学習の対象としませんでした。
### 「つ」を小書きの「っ」に変換
コマンドを例示すると
```normalize2.sh
cat - | perl -p -Mutf8 -CSD -e 's/ヽ//g;' -e 's/であつて/であって/g;' -e 's/であつた/であった/g;' -e 's/のあつた/のあった/g;' -e 's/にあつた/にあった/g;' -e 's/あつては/あっては/g;' -e 's/をもつて/をもって/g;' -e 's/によつて/によって/g;' -e 's/しなかつた/しなかった/g;' -e 's/ねじつた/ねじった/g;' -e 's/をはつた/をはった/g;' -e 's/にそつて/にそって/g;' -e 's/にはつて/にはって/g;' -e 's/つづつた/つづった/g;' -e 's/とつた/とった/g;' -e 's/なつた/なった/g;' -e 's/かかつた/かかった/g;' -e 's/いつて/いって/g;' -e 's/(\p{Han})つ([たて])/$1っ$2/g;'
```
となります。
